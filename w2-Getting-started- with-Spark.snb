{"metadata":{"name":"Getting Started  with Spark","user_save_timestamp":"1970-01-01T10:00:00.000Z","auto_save_timestamp":"1970-01-01T10:00:00.000Z","language_info":{"name":"scala","file_extension":"scala","codemirror_mode":"text/x-scala"},"trusted":true,"customLocalRepo":null,"customRepos":null,"customDeps":null,"customImports":null,"customArgs":null,"customSparkConf":null},"cells":[{"metadata":{},"cell_type":"markdown","source":"#Firing up spark"},{"metadata":{"trusted":true,"input_collapsed":false,"collapsed":false},"cell_type":"code","source":"import org.apache.spark.sql.SQLContext\n\nsc.version","outputs":[{"name":"stdout","output_type":"stream","text":"import org.apache.spark.sql.SQLContext\nsqlContext: org.apache.spark.sql.SQLContext = org.apache.spark.sql.SQLContext@6625c091\nres2: String = 1.5.1\n"},{"metadata":{},"data":{"text/html":"1.5.1"},"output_type":"execute_result","execution_count":1}]},{"metadata":{},"cell_type":"markdown","source":"#Fetch csv-library dependency"},{"metadata":{"trusted":true,"input_collapsed":false,"collapsed":false},"cell_type":"code","source":":dp com.databricks % spark-csv_2.10 % 1.2.0","outputs":[{"name":"stdout","output_type":"stream","text":"warning: there were 4 feature warning(s); re-run with -feature for details\nglobalScope.jars: Array[String] = [Ljava.lang.String;@7af2ec3\nres5: List[String] = List(/var/folders/gz/8nhlnq6s53z3nxfg4_5nsk69zx2p2f/T/spark-notebook/repo/24d765f8-d5d7-42c3-a14e-44fb75fde04d/cache/com.databricks/spark-csv_2.10/jars/spark-csv_2.10-1.2.0.jar, /Users/maxim.razumov/.m2/repository/org/scala-lang/scala-library/2.10.4/scala-library-2.10.4.jar, /var/folders/gz/8nhlnq6s53z3nxfg4_5nsk69zx2p2f/T/spark-notebook/repo/24d765f8-d5d7-42c3-a14e-44fb75fde04d/cache/org.apache.commons/commons-csv/jars/commons-csv-1.1.jar, /var/folders/gz/8nhlnq6s53z3nxfg4_5nsk69zx2p2f/T/spark-notebook/repo/24d765f8-d5d7-42c3-a14e-44fb75fde04d/cache/com.univocity/univocity-parsers/jars/univocity-parsers-1.5.1.jar)\n"},{"metadata":{},"data":{"text/html":"<div class=\"container-fluid\"><div><div class=\"col-md-12\"><div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anon921b7e677758ece82de1b1e2c7c8acdd&quot;,&quot;dataInit&quot;:[{&quot;string value&quot;:&quot;/var/folders/gz/8nhlnq6s53z3nxfg4_5nsk69zx2p2f/T/spark-notebook/repo/24d765f8-d5d7-42c3-a14e-44fb75fde04d/cache/com.databricks/spark-csv_2.10/jars/spark-csv_2.10-1.2.0.jar&quot;},{&quot;string value&quot;:&quot;/Users/maxim.razumov/.m2/repository/org/scala-lang/scala-library/2.10.4/scala-library-2.10.4.jar&quot;},{&quot;string value&quot;:&quot;/var/folders/gz/8nhlnq6s53z3nxfg4_5nsk69zx2p2f/T/spark-notebook/repo/24d765f8-d5d7-42c3-a14e-44fb75fde04d/cache/org.apache.commons/commons-csv/jars/commons-csv-1.1.jar&quot;},{&quot;string value&quot;:&quot;/var/folders/gz/8nhlnq6s53z3nxfg4_5nsk69zx2p2f/T/spark-notebook/repo/24d765f8-d5d7-42c3-a14e-44fb75fde04d/cache/com.univocity/univocity-parsers/jars/univocity-parsers-1.5.1.jar&quot;}],&quot;genId&quot;:&quot;1387917922&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/tableChart'], \n      function(playground, _magictableChart) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magictableChart,\n    \"o\": {\"headers\":[\"string value\"],\"width\":600,\"height\":400}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <label for=\"input-anon6d912b19edeee5cfd295d135b728c254\">\n      Max Points\n    </label><input id=\"input-anon6d912b19edeee5cfd295d135b728c254\" type=\"number\" name=\"input-anon6d912b19edeee5cfd295d135b728c254\" data-bind=\"textInput: value, fireChange: true, valueUpdate: 'input'\">\n      <script data-selector=\"#input-anon6d912b19edeee5cfd295d135b728c254\" data-this=\"{&quot;valueId&quot;:&quot;anon6d912b19edeee5cfd295d135b728c254&quot;,&quot;valueInit&quot;:25}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(\n ['observable', 'knockout'],\n function (Observable, ko) {\n   //console.log(\"-----------\")\n   //console.dir(this);\n   //console.dir(valueId);\n   var obs = Observable.makeObservable(valueId)\n                       .extend({ rateLimit: { //throttle\n                                   timeout: 500,\n                                   method: \"notifyWhenChangesStop\"\n                                 }\n                               }\n                       );\n   ko.applyBindings({\n     value: obs\n   }, this);\n   obs(valueInit);\n }\n)/*]]>*/</script>\n    </input>\n        <p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anon013d8384168f868b3ee2a24762ee1ae9&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p> <span style=\"color:red\"><p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anon572cf34a9fc99ab9cc2c5ad54c28d3b5&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p></span>\n        <div>\n        </div>\n      </div></div></div></div></div>"},"output_type":"execute_result","execution_count":2}]},{"metadata":{"trusted":true,"input_collapsed":false,"collapsed":false},"cell_type":"code","source":"val mnt = \"/Users/maxim.razumov/lab/ml-foundations-scala\"","outputs":[{"name":"stdout","output_type":"stream","text":"mnt: String = /Users/maxim.razumov/lab/ml-foundations-scala\n"},{"metadata":{},"data":{"text/html":"/Users/maxim.razumov/lab/ml-foundations-scala"},"output_type":"execute_result","execution_count":7}]},{"metadata":{},"cell_type":"markdown","source":"#Load a tabular data set"},{"metadata":{"trusted":true,"input_collapsed":false,"collapsed":false},"cell_type":"code","source":"val sqlContext = new SQLContext(sc)","outputs":[{"name":"stdout","output_type":"stream","text":"sqlContext: org.apache.spark.sql.SQLContext = org.apache.spark.sql.SQLContext@2ee056be\n"},{"metadata":{},"data":{"text/html":"org.apache.spark.sql.SQLContext@2ee056be"},"output_type":"execute_result","execution_count":5}]},{"metadata":{"trusted":true,"input_collapsed":false,"collapsed":false},"cell_type":"code","source":"val df = sqlContext.read\n    .format(\"com.databricks.spark.csv\")\n    .option(\"header\", \"true\") // Use first line of all files as header\n    .option(\"inferSchema\", \"true\") // Automatically infer data types\n    .load(s\"$mnt/data/people-example.csv\")","outputs":[{"name":"stdout","output_type":"stream","text":"df: org.apache.spark.sql.DataFrame = [First Name: string, Last Name: string, Country: string, age: int]\n"},{"metadata":{},"data":{"text/html":"<div class=\"df-canvas\">\n      <script data-this=\"{&quot;dataId&quot;:&quot;anonf2f28dfc566db4f6deeba6e6134a7263&quot;,&quot;partitionIndexId&quot;:&quot;anon0e179a4b5f2d27b2a72e798bcdab640d&quot;,&quot;numPartitions&quot;:1,&quot;dfSchema&quot;:{&quot;type&quot;:&quot;struct&quot;,&quot;fields&quot;:[{&quot;name&quot;:&quot;First Name&quot;,&quot;type&quot;:&quot;string&quot;,&quot;nullable&quot;:true,&quot;metadata&quot;:{}},{&quot;name&quot;:&quot;Last Name&quot;,&quot;type&quot;:&quot;string&quot;,&quot;nullable&quot;:true,&quot;metadata&quot;:{}},{&quot;name&quot;:&quot;Country&quot;,&quot;type&quot;:&quot;string&quot;,&quot;nullable&quot;:true,&quot;metadata&quot;:{}},{&quot;name&quot;:&quot;age&quot;,&quot;type&quot;:&quot;integer&quot;,&quot;nullable&quot;:true,&quot;metadata&quot;:{}}]}}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/dataframe','../javascripts/notebook/consoleDir'], \n      function(dataframe, extension) {\n        dataframe.call(data, this, extension);\n      }\n    );/*]]>*/</script>\n      <link rel=\"stylesheet\" href=\"/assets/stylesheets/ipython/css/dataframe.css\" type=\"text/css\"/>\n    </div>"},"output_type":"execute_result","execution_count":41}]},{"metadata":{},"cell_type":"markdown","source":"#DataFrame basics"},{"metadata":{"trusted":true,"input_collapsed":false,"collapsed":false},"cell_type":"code","source":"df //we can view first few lines of table","outputs":[{"name":"stdout","output_type":"stream","text":"res31: org.apache.spark.sql.DataFrame = [First Name: string, Last Name: string, Country: string, age: int]\n"},{"metadata":{},"data":{"text/html":"<div class=\"df-canvas\">\n      <script data-this=\"{&quot;dataId&quot;:&quot;anonb02b478e60127390133a5d3a728e5b11&quot;,&quot;partitionIndexId&quot;:&quot;anon187e79b35389a547ab6ac6f84bffd0e3&quot;,&quot;numPartitions&quot;:1,&quot;dfSchema&quot;:{&quot;type&quot;:&quot;struct&quot;,&quot;fields&quot;:[{&quot;name&quot;:&quot;First Name&quot;,&quot;type&quot;:&quot;string&quot;,&quot;nullable&quot;:true,&quot;metadata&quot;:{}},{&quot;name&quot;:&quot;Last Name&quot;,&quot;type&quot;:&quot;string&quot;,&quot;nullable&quot;:true,&quot;metadata&quot;:{}},{&quot;name&quot;:&quot;Country&quot;,&quot;type&quot;:&quot;string&quot;,&quot;nullable&quot;:true,&quot;metadata&quot;:{}},{&quot;name&quot;:&quot;age&quot;,&quot;type&quot;:&quot;integer&quot;,&quot;nullable&quot;:true,&quot;metadata&quot;:{}}]}}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/dataframe','../javascripts/notebook/consoleDir'], \n      function(dataframe, extension) {\n        dataframe.call(data, this, extension);\n      }\n    );/*]]>*/</script>\n      <link rel=\"stylesheet\" href=\"/assets/stylesheets/ipython/css/dataframe.css\" type=\"text/css\"/>\n    </div>"},"output_type":"execute_result","execution_count":42}]},{"metadata":{"trusted":true,"input_collapsed":false,"collapsed":false},"cell_type":"code","source":"df.head()","outputs":[{"name":"stdout","output_type":"stream","text":"res29: org.apache.spark.sql.Row = [Bob,Smith,United States,24]\n"},{"metadata":{},"data":{"text/html":"[Bob,Smith,United States,24]"},"output_type":"execute_result","execution_count":39}]},{"metadata":{"trusted":true,"input_collapsed":false,"collapsed":false},"cell_type":"code","source":"df.show()","outputs":[{"name":"stdout","output_type":"stream","text":"+----------+---------+-------------+---+\n|First Name|Last Name|      Country|age|\n+----------+---------+-------------+---+\n|       Bob|    Smith|United States| 24|\n|     Alice| Williams|       Canada| 23|\n|   Malcolm|     Jone|      England| 22|\n|     Felix|    Brown|          USA| 23|\n|      Alex|   Cooper|       Poland| 23|\n|       Tod| Campbell|United States| 22|\n|     Derek|     Ward|  Switzerland| 25|\n+----------+---------+-------------+---+\n\n"},{"metadata":{},"data":{"text/html":""},"output_type":"execute_result","execution_count":40}]},{"metadata":{},"cell_type":"markdown","source":"# Visualization"},{"metadata":{"trusted":true,"input_collapsed":false,"collapsed":false},"cell_type":"code","source":"import notebook.front.third.wisp._\nimport com.quantifind.charts.highcharts.Axis","outputs":[{"name":"stdout","output_type":"stream","text":"import notebook.front.third.wisp._\nimport com.quantifind.charts.highcharts.Axis\n"},{"metadata":{},"data":{"text/html":""},"output_type":"execute_result","execution_count":24}]},{"metadata":{"trusted":true,"input_collapsed":false,"collapsed":false},"cell_type":"code","source":"val allc = df.agg(\"age\" -> \"count\").map(_.getAs[Long](0)).collect.head.toFloat","outputs":[{"name":"stdout","output_type":"stream","text":"allc: Float = 7.0\n"},{"metadata":{},"data":{"text/html":"7.0"},"output_type":"execute_result","execution_count":72}]},{"metadata":{"trusted":true,"input_collapsed":false,"collapsed":false},"cell_type":"code","source":"val grage = df.groupBy(\"age\").count().map(r => (r.getInt(0),r.getLong(1)/allc*100)).collect\n","outputs":[{"name":"stdout","output_type":"stream","text":"grage: Array[(Int, Float)] = Array((24,14.285715), (25,14.285715), (22,28.57143), (23,42.857143))\n"},{"metadata":{},"data":{"text/html":"<div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anonaa60bd47da7e56ad41ae0b3b054ef08c&quot;,&quot;dataInit&quot;:[{&quot;_1&quot;:24,&quot;_2&quot;:14.285715103149414},{&quot;_1&quot;:25,&quot;_2&quot;:14.285715103149414},{&quot;_1&quot;:22,&quot;_2&quot;:28.571430206298828},{&quot;_1&quot;:23,&quot;_2&quot;:42.85714340209961}],&quot;genId&quot;:&quot;359374813&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/tabs'], \n      function(playground, _magictabs) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magictabs,\n    \"o\": {}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <label for=\"input-anon225716639994c864871ab9519f73a7fd\">\n      Max Points (controlling all tabs)\n    </label><input id=\"input-anon225716639994c864871ab9519f73a7fd\" type=\"number\" name=\"input-anon225716639994c864871ab9519f73a7fd\" data-bind=\"textInput: value, fireChange: true, valueUpdate: 'input'\">\n      <script data-selector=\"#input-anon225716639994c864871ab9519f73a7fd\" data-this=\"{&quot;valueId&quot;:&quot;anon225716639994c864871ab9519f73a7fd&quot;,&quot;valueInit&quot;:25}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(\n ['observable', 'knockout'],\n function (Observable, ko) {\n   //console.log(\"-----------\")\n   //console.dir(this);\n   //console.dir(valueId);\n   var obs = Observable.makeObservable(valueId)\n                       .extend({ rateLimit: { //throttle\n                                   timeout: 500,\n                                   method: \"notifyWhenChangesStop\"\n                                 }\n                               }\n                       );\n   ko.applyBindings({\n     value: obs\n   }, this);\n   obs(valueInit);\n }\n)/*]]>*/</script>\n    </input>\n        <div>\n          <ul class=\"nav nav-tabs\" id=\"ul359374813\"><li>\n                <a href=\"#tab359374813-0\"><i class=\"fa fa-table\"/></a>\n              </li><li>\n                <a href=\"#tab359374813-1\"><i class=\"fa fa-dot-circle-o\"/></a>\n              </li><li>\n                <a href=\"#tab359374813-2\"><i class=\"fa fa-line-chart\"/></a>\n              </li><li>\n                <a href=\"#tab359374813-3\"><i class=\"fa fa-bar-chart\"/></a>\n              </li></ul>\n\n          <div class=\"tab-content\" id=\"tab359374813\"><div class=\"tab-pane\" id=\"tab359374813-0\">\n              <div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anon9a4d7bafdb096fcdc3c4f321822a6287&quot;,&quot;dataInit&quot;:[{&quot;_1&quot;:24,&quot;_2&quot;:14.285715103149414},{&quot;_1&quot;:25,&quot;_2&quot;:14.285715103149414},{&quot;_1&quot;:22,&quot;_2&quot;:28.571430206298828},{&quot;_1&quot;:23,&quot;_2&quot;:42.85714340209961}],&quot;genId&quot;:&quot;2136289408&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/tableChart'], \n      function(playground, _magictableChart) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magictableChart,\n    \"o\": {\"headers\":[\"_1\",\"_2\"],\"width\":600,\"height\":400}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <label for=\"input-anon3e3e8f555b55d4ea7f70d6792fa0cbc0\">\n      Max Points\n    </label><input id=\"input-anon3e3e8f555b55d4ea7f70d6792fa0cbc0\" type=\"number\" name=\"input-anon3e3e8f555b55d4ea7f70d6792fa0cbc0\" data-bind=\"textInput: value, fireChange: true, valueUpdate: 'input'\">\n      <script data-selector=\"#input-anon3e3e8f555b55d4ea7f70d6792fa0cbc0\" data-this=\"{&quot;valueId&quot;:&quot;anon3e3e8f555b55d4ea7f70d6792fa0cbc0&quot;,&quot;valueInit&quot;:25}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(\n ['observable', 'knockout'],\n function (Observable, ko) {\n   //console.log(\"-----------\")\n   //console.dir(this);\n   //console.dir(valueId);\n   var obs = Observable.makeObservable(valueId)\n                       .extend({ rateLimit: { //throttle\n                                   timeout: 500,\n                                   method: \"notifyWhenChangesStop\"\n                                 }\n                               }\n                       );\n   ko.applyBindings({\n     value: obs\n   }, this);\n   obs(valueInit);\n }\n)/*]]>*/</script>\n    </input>\n        <p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anon148679b88ad7e15a66a5e94816fa4d42&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p> <span style=\"color:red\"><p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anon0911b83dc50423d002d653499d488fef&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p></span>\n        <div>\n        </div>\n      </div></div>\n              </div><div class=\"tab-pane\" id=\"tab359374813-1\">\n              <div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anon8f365c1b0937594125b6070c7a10b2a6&quot;,&quot;dataInit&quot;:[{&quot;_1&quot;:24,&quot;_2&quot;:14.285715103149414},{&quot;_1&quot;:25,&quot;_2&quot;:14.285715103149414},{&quot;_1&quot;:22,&quot;_2&quot;:28.571430206298828},{&quot;_1&quot;:23,&quot;_2&quot;:42.85714340209961}],&quot;genId&quot;:&quot;26498532&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/scatterChart'], \n      function(playground, _magicscatterChart) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magicscatterChart,\n    \"o\": {\"x\":\"_1\",\"y\":\"_2\",\"width\":600,\"height\":400}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <label for=\"input-anonab317fc56b44a98e951a89a99f1af5fb\">\n      Max Points\n    </label><input id=\"input-anonab317fc56b44a98e951a89a99f1af5fb\" type=\"number\" name=\"input-anonab317fc56b44a98e951a89a99f1af5fb\" data-bind=\"textInput: value, fireChange: true, valueUpdate: 'input'\">\n      <script data-selector=\"#input-anonab317fc56b44a98e951a89a99f1af5fb\" data-this=\"{&quot;valueId&quot;:&quot;anonab317fc56b44a98e951a89a99f1af5fb&quot;,&quot;valueInit&quot;:25}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(\n ['observable', 'knockout'],\n function (Observable, ko) {\n   //console.log(\"-----------\")\n   //console.dir(this);\n   //console.dir(valueId);\n   var obs = Observable.makeObservable(valueId)\n                       .extend({ rateLimit: { //throttle\n                                   timeout: 500,\n                                   method: \"notifyWhenChangesStop\"\n                                 }\n                               }\n                       );\n   ko.applyBindings({\n     value: obs\n   }, this);\n   obs(valueInit);\n }\n)/*]]>*/</script>\n    </input>\n        <p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anon18ca4258e8838f34fa7af7e8599825e3&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p> <span style=\"color:red\"><p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anonc1a7b63557b1b5f616db50830e04c7d4&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p></span>\n        <div>\n        </div>\n      </div></div>\n              </div><div class=\"tab-pane\" id=\"tab359374813-2\">\n              <div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anonebbf0a8f8a40bbcd2729a48945321223&quot;,&quot;dataInit&quot;:[{&quot;_1&quot;:24,&quot;_2&quot;:14.285715103149414},{&quot;_1&quot;:25,&quot;_2&quot;:14.285715103149414},{&quot;_1&quot;:22,&quot;_2&quot;:28.571430206298828},{&quot;_1&quot;:23,&quot;_2&quot;:42.85714340209961}],&quot;genId&quot;:&quot;819640860&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/lineChart'], \n      function(playground, _magiclineChart) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magiclineChart,\n    \"o\": {\"x\":\"_1\",\"y\":\"_2\",\"width\":600,\"height\":400}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <label for=\"input-anon213d2c54d5a59c58dc6749ccdaf1dccc\">\n      Max Points\n    </label><input id=\"input-anon213d2c54d5a59c58dc6749ccdaf1dccc\" type=\"number\" name=\"input-anon213d2c54d5a59c58dc6749ccdaf1dccc\" data-bind=\"textInput: value, fireChange: true, valueUpdate: 'input'\">\n      <script data-selector=\"#input-anon213d2c54d5a59c58dc6749ccdaf1dccc\" data-this=\"{&quot;valueId&quot;:&quot;anon213d2c54d5a59c58dc6749ccdaf1dccc&quot;,&quot;valueInit&quot;:25}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(\n ['observable', 'knockout'],\n function (Observable, ko) {\n   //console.log(\"-----------\")\n   //console.dir(this);\n   //console.dir(valueId);\n   var obs = Observable.makeObservable(valueId)\n                       .extend({ rateLimit: { //throttle\n                                   timeout: 500,\n                                   method: \"notifyWhenChangesStop\"\n                                 }\n                               }\n                       );\n   ko.applyBindings({\n     value: obs\n   }, this);\n   obs(valueInit);\n }\n)/*]]>*/</script>\n    </input>\n        <p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anon5631aed722b5e031af1845b809d2d7cd&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p> <span style=\"color:red\"><p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anonf94a82da69f20bb1990886ec6fc627a4&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p></span>\n        <div>\n        </div>\n      </div></div>\n              </div><div class=\"tab-pane\" id=\"tab359374813-3\">\n              <div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anon653a98a9945aa8db4faf064fd1407868&quot;,&quot;dataInit&quot;:[{&quot;_1&quot;:24,&quot;_2&quot;:14.285715103149414},{&quot;_1&quot;:25,&quot;_2&quot;:14.285715103149414},{&quot;_1&quot;:22,&quot;_2&quot;:28.571430206298828},{&quot;_1&quot;:23,&quot;_2&quot;:42.85714340209961}],&quot;genId&quot;:&quot;947627594&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/barChart'], \n      function(playground, _magicbarChart) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magicbarChart,\n    \"o\": {\"x\":\"_1\",\"y\":\"_2\",\"width\":600,\"height\":400}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <label for=\"input-anond29d81104e3f29748901afb9fe91af03\">\n      Max Points\n    </label><input id=\"input-anond29d81104e3f29748901afb9fe91af03\" type=\"number\" name=\"input-anond29d81104e3f29748901afb9fe91af03\" data-bind=\"textInput: value, fireChange: true, valueUpdate: 'input'\">\n      <script data-selector=\"#input-anond29d81104e3f29748901afb9fe91af03\" data-this=\"{&quot;valueId&quot;:&quot;anond29d81104e3f29748901afb9fe91af03&quot;,&quot;valueInit&quot;:25}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(\n ['observable', 'knockout'],\n function (Observable, ko) {\n   //console.log(\"-----------\")\n   //console.dir(this);\n   //console.dir(valueId);\n   var obs = Observable.makeObservable(valueId)\n                       .extend({ rateLimit: { //throttle\n                                   timeout: 500,\n                                   method: \"notifyWhenChangesStop\"\n                                 }\n                               }\n                       );\n   ko.applyBindings({\n     value: obs\n   }, this);\n   obs(valueInit);\n }\n)/*]]>*/</script>\n    </input>\n        <p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anon4fd3978e02d00397fb1e2773b16c8baf&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p> <span style=\"color:red\"><p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anonc2dd0934e62e3b00b5d90e7a991b629b&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p></span>\n        <div>\n        </div>\n      </div></div>\n              </div></div>\n        </div>\n      </div></div>"},"output_type":"execute_result","execution_count":87}]},{"metadata":{"trusted":true,"input_collapsed":false,"collapsed":false},"cell_type":"code","source":"Plot(Seq(Pairs(grage, \"bar\")), yCat = Seq(grage.map(_._1.toString)))","outputs":[{"name":"stdout","output_type":"stream","text":"res59: notebook.front.third.wisp.Plot = <Plot widget>\n"},{"metadata":{},"data":{"text/html":"<div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anone371faf1df24e12b03d0e749308d912d&quot;,&quot;dataInit&quot;:[{&quot;series&quot;:[{&quot;data&quot;:[{&quot;x&quot;:24,&quot;y&quot;:14.285715103149414},{&quot;x&quot;:25,&quot;y&quot;:14.285715103149414},{&quot;x&quot;:22,&quot;y&quot;:28.571430206298828},{&quot;x&quot;:23,&quot;y&quot;:42.85714340209961}],&quot;type&quot;:&quot;bar&quot;}],&quot;exporting&quot;:{&quot;filename&quot;:&quot;chart&quot;},&quot;yAxis&quot;:[{&quot;categories&quot;:[&quot;24&quot;,&quot;25&quot;,&quot;22&quot;,&quot;23&quot;],&quot;title&quot;:{&quot;text&quot;:&quot;&quot;}}],&quot;plotOptions&quot;:{&quot;bar&quot;:{&quot;turboThreshold&quot;:0}},&quot;credits&quot;:{&quot;href&quot;:&quot;&quot;,&quot;text&quot;:&quot;&quot;},&quot;chart&quot;:{&quot;zoomType&quot;:&quot;xy&quot;},&quot;title&quot;:{&quot;text&quot;:&quot;&quot;}}],&quot;genId&quot;:&quot;97050980&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/wispWrap'], \n      function(playground, _wispWrap) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _wispWrap,\n    \"o\": {\"width\":600,\"height\":400}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    </div>"},"output_type":"execute_result","execution_count":88}]},{"metadata":{"trusted":true,"input_collapsed":false,"collapsed":true},"cell_type":"code","source":"","outputs":[]}],"nbformat":4}